# SPEC-PUB-LECTURE-005: 강의 스크립트 → 출판 원고 변환

**Version**: 1.0.0
**Status**: DRAFT
**Priority**: HIGH
**Phase**: Phase 1 (핵심 파이프라인)
**Created**: 2025-11-16
**Updated**: 2025-11-16
**Language**: 한국어
**Owner**: @user

---

## 📋 규격 요약

강의 녹취 스크립트를 출판 가능한 책 형식의 원고로 재구성합니다. 구두 표현을 문어체로 전환하고, 강의의 교육적 가치를 보존하면서도 출판 시장에 맞는 형식으로 변환하는 전문적인 작업입니다.

**변환 단계**:
1. 스크립트 분석 (강의 흐름, 핵심 메시지 파악)
2. 구조 재구성 (강의 흐름 → 책의 논리적 구조)
3. 문어체 변환 (구두 표현 → 읽기 편한 문어)
4. 콘텐츠 보강 (필요시 보충 자료)
5. 최종 검수

---

## 🎯 필수 요구사항 (UBIQUITOUS)

> 시스템은 강의의 핵심 가치를 완벽히 보존해야 함
> 시스템은 구두 표현의 중복성을 제거해야 함
> 시스템은 명확한 논리 구조로 재구성해야 함
> 시스템은 강사의 개인적 표현 스타일을 고려해야 함
> 시스템은 청중의 반응/질문 등 불필요한 요소를 제거해야 함

---

## 📁 이벤트 기반 요구사항 (EVENT-DRIVEN)

### WHEN 강사/출판사가 강의 스크립트를 업로드할 때

```
GIVEN: 강의 녹취 스크립트 (마크다운, TXT, 워드 등)
WHEN: 파일 업로드 + 기본 정보 입력 (강의명, 강사명, 강의 분야 등)
THEN: 시스템은 다음을 수행해야 함
  ✅ 파일 형식 자동 감지 및 마크다운으로 변환
  ✅ 스크립트 길이 및 구조 분석
  ✅ 강의 흐름 자동 분석 (주요 주제, 전개 순서)
  ✅ 기본 통계 제시 (단어 수, 예상 책 페이지 수, 소요 시간)
```

### WHEN 스크립트 분석이 완료될 때

```
GIVEN: 업로드된 강의 스크립트
WHEN: 자동 분석 완료
THEN: 시스템은 다음을 수행해야 함
  ✅ [moai-pub-writer] 에이전트로 구조 분석:
       - 강의의 핵심 메시지 추출
       - 주요 포인트 식별 및 우선순위 결정
       - 논리적 흐름 평가
       - 책으로 재구성할 최적 방안 제시
  ✅ 재구성 방안 사용자 검토 및 승인
```

### WHEN 재구성 방안이 확정될 때

```
GIVEN: 최종 확정된 재구성 계획 + 챕터 구조
WHEN: 사용자가 "변환 시작" 버튼 클릭
THEN: 시스템은 다음을 수행해야 함
  ✅ [moai-pub-writer] 에이전트로 문어체 변환 (병렬, 최대 5개 챕터)
  ✅ 각 에이전트에 다음을 전달:
       - 원문 스크립트 해당 부분
       - 챕터 목표 및 핵심 메시지
       - 주변 챕터 요약 (문맥 유지)
       - 강의 특성 및 강사 스타일
  ✅ 진행 상황 실시간 추적
```

### WHEN 각 챕터 변환이 완료될 때

```
GIVEN: 변환된 챕터
WHEN: 각 챕터 완성
THEN: 시스템은 다음을 수행해야 함
  ✅ [moai-pub-editor] 에이전트로 윤문:
       - 문어체 자연스러움 검증
       - 문체 일관성 확인
       - 가독성 개선
  ✅ 교정교열 (오타, 띄어쓰기 수정)
  ✅ 변환 전/후 버전 비교 제시
  ✅ 사용자 승인 대기
```

### WHEN 모든 챕터가 변환/편집될 때

```
GIVEN: 변환 완료된 모든 챕터
WHEN: 마지막 챕터 처리 완료
THEN: 시스템은 다음을 수행해야 함
  ✅ [moai-pub-orchestrator]로 통합:
       - 장절 순서 확인
       - 목차 자동 생성
       - 상호 참조 검증
  ✅ 전체 원고 일관성 검수:
       - 용어 통일 (강의 용어 vs 책 용어)
       - 톤앤매너 일관성
       - 논리적 흐름
  ✅ 강의 핵심 가치 보존 여부 최종 검증
  ✅ 완성원고 마크다운 생성
```

---

## 🚫 원하지 않는 동작 (UNWANTED BEHAVIOR)

### IF 변환 과정에서 강의의 핵심 메시지 손실 감지

```
THEN: 시스템은 다음을 수행해야 함
  ✅ 해당 부분 플래그 표시
  ✅ 원문과 변환문 명확히 제시
  ✅ 강사 또는 출판담당자 최종 확인 필수
```

### IF 구두 표현의 중복이 충분히 제거되지 않음

```
THEN: 시스템은 다음을 수행해야 함
  ✅ 중복도 높은 구간 식별
  ✅ 재편집 제안
  ✅ 사용자 선택: 자동 재편집 또는 수동 검토
```

### IF 문어체 변환 품질 미달

```
THEN: 시스템은 다음을 수행해야 함
  ✅ 품질 점수 <75점인 부분 플래그
  ✅ 재작성 제안
  ✅ 사용자 선택: 재작성 또는 수동 검토
```

### IF 강의 특성(위트, 개인적 표현)이 과도하게 제거됨

```
THEN: 시스템은 다음을 수행해야 함
  ✅ 강의 특성 보존도 평가
  ✅ 필요한 부분 복원 제안
  ✅ 강사 승인 후 최종 결정
```

---

## ⚙️ 상태 기반 요구사항 (STATE-DRIVEN)

### WHILE 변환 작업 진행 중

```
시스템은 다음을 유지해야 함:
  ✅ 챕터별 진행 상태 (분석중/변환중/편집중/검수중/완료)
  ✅ 전체 진행률
  ✅ 강의 핵심 메시지 보존도 지표
  ✅ 문체 일관성 모니터링
  ✅ 변환 품질 점수 (실시간)
```

---

## 🎁 선택 기능 (OPTIONAL)

### WHERE 강사가 특정 부분의 개인적 표현을 유지하고 싶을 때

```
시스템은 다음을 제공해야 함:
  ✅ 부분 보존 마킹 기능
  ✅ 표시된 부분 자동 보존 (문어체 변환 제외)
  ✅ 보존도 조정 옵션
```

### WHERE 출판사가 책의 길이를 조정하고 싶을 때

```
시스템은 다음을 제공해야 함:
  ✅ 목표 길이 설정 (예: 50,000-70,000단어)
  ✅ 자동 길이 조정 (불필요한 부분 압축/제거)
  ✅ 핵심 내용 보존 확인
```

---

## ✅ 수용 기준 (ACCEPTANCE CRITERIA)

### Given/When/Then 시나리오 1: 기본 변환 흐름

```
Given: 20시간 강의 스크립트 (약 100,000단어)
When: 전체 변환 파이프라인 실행
Then:
  ✅ 재구성: 1주일 (챕터 구조 확정)
  ✅ 변환: 2-3주 (병렬 처리)
  ✅ 핵심 메시지 보존도: ≥95%
  ✅ 강의 특성 보존도: ≥80%
  ✅ 최종 원고 당장 출판 가능
  ✅ 가독성 점수: ≥85점
```

### Given/When/Then 시나리오 2: 병렬 변환

```
Given: 100,000단어를 5개 챕터로 분할
When: 병렬 변환 실행
Then:
  ✅ 변환 시간: 순차 대비 60% 단축
  ✅ 챕터 간 문체 일관성: ≥90점
  ✅ 전체 통합 검수: 3-5일
```

### Given/When/Then 시나리오 3: 구두표현 제거 효과

```
Given: 원본 스크립트 (구두 표현 풍부)
When: 문어체 변환 완료
Then:
  ✅ 단어 수 감소: 20-30% (중복 제거 효과)
  ✅ 명확성 향상: 가독성 +20점 이상
  ✅ 핵심 메시지 손실 없음: ≥95% 보존
```

---

## 📊 기술 스택 및 의존성

**필수 에이전트**:
- `moai-pub-writer`: 재구성 + 변환
- `moai-pub-editor`: 윤문 + 교정
- `moai-pub-orchestrator`: 병렬 처리 조율

**필수 스킬**:
- `moai-pub-chunking`: 챕터 분할
- `moai-pub-style-guide`: 스타일 규칙

**버전 요구사항**:
- Python ≥3.11
- Claude Sonnet 4.5+ (복잡한 변환)
- Claude Haiku 4.5 (병렬 처리)

---

## 📈 성공 지표

- **재구성 시간**: 1주일
- **변환 속도**: 100K 단어 2-3주
- **핵심 메시지 보존**: ≥95%
- **강의 특성 보존**: ≥80%
- **가독성**: ≥85점
- **문체 일관성**: ≥90점

---

## 🔄 의존성

- SPEC-PUB-WRITE-003: 집필 로직 재사용
- SPEC-PUB-EDIT-004: 편집 로직 재사용
- SPEC-007: 병렬 처리 기반 필요
