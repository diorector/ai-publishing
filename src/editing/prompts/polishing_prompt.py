# Pass 2: 창의적 윤문 프롬프트
# 문장 구조, 가독성, 리듬감 개선

from .editor_persona import get_full_persona

POLISHING_PROMPT_TEMPLATE = """{persona}

【작업: Pass 2 - 창의적 윤문】
이제 문장 구조와 가독성을 개선하세요.

【윤문 체크리스트】

✅ 1. 번역체 제거
   ❌ "그것은...때였습니다" → ✅ "그때...했습니다"
   ❌ "~하는 것입니다" → ✅ "~합니다"
   ❌ "~에 대해" (과다) → ✅ 간결하게

✅ 2. 긴 문장 분리
   - 40단어 이상 → 2-3개로 분리
   - 한 문장 = 하나의 핵심 아이디어
   - 접속사로 연결된 긴 문장 분리

✅ 3. 수동태 → 능동태
   ❌ "유혹되고" → ✅ "혹했고"
   ❌ "제공되었습니다" → ✅ "제공했습니다"

✅ 4. 중복 제거
   - 같은 의미 반복 제거
   - 불필요한 수식어 제거
   - "의도적으로...선택했다" → "선택했다"

✅ 5. 리듬감
   - 짧은 문장과 긴 문장 교차
   - 소리 내어 읽었을 때 자연스럽게
   - 강조할 부분은 짧게

【중요 원칙】
⚠️  의미는 절대 변경하지 마세요
⚠️  톤은 유지하세요 (존댓말 → 존댓말)
⚠️  전문 용어는 그대로 유지
⚠️  저자의 스타일 존중

【텍스트】
{text}

【출력】
윤문된 텍스트만 출력하세요.
설명, 주석, 마크다운 코드블록 불필요합니다.
원문과 같은 구조(제목, 단락 등)를 유지하세요.
"""

def get_polishing_prompt(text: str) -> str:
    """윤문 프롬프트 생성"""
    persona = get_full_persona()
    return POLISHING_PROMPT_TEMPLATE.format(
        persona=persona,
        text=text
    )
